<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>Hexo</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hexo</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/19/startup技术框架/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="瘦皮猴">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/19/startup技术框架/" itemprop="url">startup技术框架</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-19T17:18:00+08:00">
                2018-01-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="基础服务层"><a href="#基础服务层" class="headerlink" title="基础服务层"></a>基础服务层</h2><ol>
<li>后台关系数据库使用的mysql，暂时只启用一个mysql实体，读写一体。后续会根据需要进行扩展，一主多从，读写分离。</li>
<li>缓存使用的redis，目前主要用于验证码，登录授权token等场景。</li>
<li>消息队列。上家公司使用的rabbitmq，但是rabbitmq太重，且erlang太过小众。如果使用redis作为消息队列的话，又太过轻量，无法保证持久化，耗内存。最终选用了java系的kafka，社区活跃，且易于横向扩展，还未正式推出1.0正式版就已经被大量技术人员使用。消息队列主要作为中间件，解藕业务系统，加速http访问速度，将不紧要的处理，拿到其他服务组件来处理。</li>
<li>分布式文件存储系统minio，主要用于媒体数据的存储。使用go编写，支持分布式扩展，与amazon s3存储服务接口兼容。运行高效，对外服务器下载速度接近本地下载带宽极限。</li>
</ol>
<h2 id="业务层"><a href="#业务层" class="headerlink" title="业务层"></a>业务层</h2><ol>
<li>http api接口使用django web框架编写，尽量回避了面向对象，对oo实在是没很多好感（可参见 <a href="http://www.shoupihou.site/2016/10/15/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%A7%82%E6%84%9F/" target="_blank" rel="noopener">面向对象观感</a> 一文）。如果从更广义的角度来看，在一个python模块中，放入一组定位和作用类似的函数族，本质和面向对象也并无太大差别。</li>
<li>consumer业务组件，完成接收消息队列接收到的消息，并实际处理。</li>
<li>cleaner业务组件，定时检查媒体数据是否过期，过时，并做出相应处理。</li>
</ol>
<h2 id="技术方案迭代"><a href="#技术方案迭代" class="headerlink" title="技术方案迭代"></a>技术方案迭代</h2><h3 id="媒体数据的接收，存储与下载"><a href="#媒体数据的接收，存储与下载" class="headerlink" title="媒体数据的接收，存储与下载"></a>媒体数据的接收，存储与下载</h3><ol>
<li>在处理媒体数据时，常见方案，接收和下载都在脚本层完成，存储在本地文件系统或第三方云存储中。</li>
<li>考虑到django为同步阻塞的多进程多线程web框架，脚本层完成大文件的传输工作将极大的降低系统吞吐量。 通过一定的调研工作，确定了nginx代为传输的技术方案。引入nginx扩展模块nginx_upload_module，编译nginx。由nginx 这个多路复用的http异步框架，完成对大文件的接收，存储下载操作。文件上传完成后，nginx通知脚本层文件在文件系统中的存储位置，并完成存储操作。在文件的下载时，由脚本层完成下载鉴权。</li>
<li>文件的本地存储影响了api的横向扩展，如果需要添加服务器并新建api实例，在提供文件服务时，必须定位文件的存储位置。由此带来的业务复杂度，大大提高了系统的复杂度已经可维护性。为了解决上述缺点，系统加入了分布式存储服务minio，将文件存储到一个分布式的存储系统中。文件的上传操作，同样由nginx完成，脚本层完成从本地文件系统到分布式存储服务minio的转存操作。针对100M左右大小的文件，初步测定转存需要时间为3－5s，还算能接受。文件的下载服务由脚本层完成minio和nginx之间的中转传说。</li>
<li>脚本层的文件中转服务，实际测试效果很差，远远无法满足业务需求，传输速度仅为50kB/s左右。由此在此进行方案优化，由nginx做动态反向代理和minio直接通信，完成下载操作，速度可榨干本地带宽。脚本层在下载时作为nginx与minio通信中间人。</li>
</ol>
<h3 id="容器编排与调度方案（未完成实际部署）"><a href="#容器编排与调度方案（未完成实际部署）" class="headerlink" title="容器编排与调度方案（未完成实际部署）"></a>容器编排与调度方案（未完成实际部署）</h3><p>现有服务均为docker化部署，所有服务均可极为便利的部署和迁移。无需担心linux的各服务组件版本与依赖关系。docker的本地部署方案的缺点是无法跨服务器做横向部署，因此调研docker容器的编排与部署方案。</p>
<ol>
<li>最先引起自己注意的是原豆瓣的技术大咖开源的eru以及lain。但是这两套方案都太过小众，友好性不够，遇到问题无法快速借助社区解决，最后放弃。</li>
<li>rancher的安装很友好，但使用起来并不稳定，相对小众，太年轻了些。</li>
<li>docker原生的swarm，安装友好度也挺不错，但是在使用后，错误反馈并不是很到位，命令行用的有点莫名其妙。集群子节点删除容器服务后，master节点并未同步信息，且无错误提示，果断弃坑。</li>
<li>谷歌的kubernetes 部署友好度不够，较为复杂，但是稳定性没得说，后续将逐步跟进kubernets。</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/22/文字注解红黑树/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="瘦皮猴">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/22/文字注解红黑树/" itemprop="url">文字注解红黑树</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-22T00:00:00+08:00">
                2017-09-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>请配合<a href="https://en.wikipedia.org/wiki/Red%E2%80%93black_tree" target="_blank" rel="noopener">维基百科</a>阅读<br><a href="https://github.com/pihou/wheels/blob/master/rbtree.py" target="_blank" rel="noopener">编码实现</a></p>
<h2 id="一-节点添加（请配合维基百科查看此文）"><a href="#一-节点添加（请配合维基百科查看此文）" class="headerlink" title="一. 节点添加（请配合维基百科查看此文）"></a>一. 节点添加（请配合维基百科查看此文）</h2><ol>
<li><p>按照查找二叉树的规则压入节点，节点在压入后，将位于非叶节点的最底层。此时将新压入节点的含义泛化，将其理解为一颗子树的根节点。这个子树的每条路径的黑色节点长度都被新增了1.破坏了红黑树的平衡，为此需要后续调整（如果节点最终选定为黑色）2. 需要考虑其父节点颜色，以保持红黑树约束（如果节点选定为红色）；</p>
</li>
<li><p>case1 如果节点N（含义见百科），没有父节点，则整个添加过程完成，整个红黑树的长度被增高一个节点，将节点设置为黑色；</p>
</li>
<li><p>case2 如果节点P为黑色，则添加完成，因为节点N为红色，整个树的高度保持不变；</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/09/22/文字注解红黑树/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/06/java类搜索浅析/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="瘦皮猴">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/06/java类搜索浅析/" itemprop="url">java类搜索浅析</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-06T00:00:00+08:00">
                2017-09-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>java官方库的搜索路径(bootstrap classes),可通过java系统属性 sun.boot.class.path指明(类似与python的sys.path)</p>
<p>java扩展包的搜索路径,可通过java系统属性 java.ext.dirs指明;</p>
<p>java的用户自定义类或第三方类,可通过java系统属性 java.class.path指定(与CLASS_PATH环境变量存在关联).</p>
<p>这些系统属性可通过以下java源码打印出:<br>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/09/06/java类搜索浅析/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/05/java volatile浅析/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="瘦皮猴">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/05/java volatile浅析/" itemprop="url">java volatile浅析</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-05T00:00:00+08:00">
                2017-09-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>java volatile 关键字浅析</p>
<p>查找volatile相关资料，提到最多的是两点</p>
<ol>
<li>volatile可以禁止java的指令重排，防止同步异常；</li>
<li>被申明为volatile的变量，修改后对其他线程的可见性；</li>
</ol>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/09/05/java volatile浅析/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/30/dns浅析/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="瘦皮猴">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/07/30/dns浅析/" itemprop="url">dns浅析</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-30T00:00:00+08:00">
                2017-07-30
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>刚入职没到半年时，找公司运维申请了一个微服务的二级域名。但是域名迟迟没有生效，对于域名解析机制也不是很了解，询问运维，运维回复说dns域名信息需要同步，dns服务器很多的。对于运维的回复一直持怀疑态度，就算dns解析从根服务器，到顶级域名服务器，再到二级，网络通信的速度这么快，无论如何好几分钟的时间也说不过去。</p>
<p>为了解决心中的疑问，最近详细阅读了tcp／ip详解的dns部分，并在网上搜寻资料，希望能够得到解答。事实证明，运维太挫了，鄙视下。</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/07/30/dns浅析/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/16/python多线程浅析/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="瘦皮猴">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/07/16/python多线程浅析/" itemprop="url">python多线程浅析</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-16T00:00:00+08:00">
                2017-07-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>实际工作中对python多线程技术的使用少之又少。一直以来并未对python的多线程做过多深入。uwsgi在启动http服务时可以启动多进程和多线程。但是日常开发实际多数时候并不用关心多线程，一方面是uwsgi模块已经封装的很完善，另一方面则是因为http的无状态设计，在开放过程中涉及到使用全局变量的情形基本没有。</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/07/16/python多线程浅析/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/11/tcp协议概览/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="瘦皮猴">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/11/tcp协议概览/" itemprop="url">tcp协议概览</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-11T00:00:00+08:00">
                2017-06-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h3 id="一-状态机器切换"><a href="#一-状态机器切换" class="headerlink" title="一. 状态机器切换"></a>一. 状态机器切换</h3><h4 id="主动（连接，断开）"><a href="#主动（连接，断开）" class="headerlink" title="主动（连接，断开）"></a>主动（连接，断开）</h4><ol>
<li>socket() 创建套接字（CLOSED state）</li>
<li>connect 连接服务器,发送sync tcp数据包进入 SYN_SEND state</li>
<li>接收到服务器返回的sync ack 进入 ESTABLISHED state，connect调用返回</li>
<li>close 关闭套接字 发送 FIN tcp数据包，进入FIN_WAIT1 state</li>
<li>接收到服务端fin ack 进入 FIN_WAIT2 state</li>
<li>接收到服务端fin 进入到 TIME_WAIT state, 在经过指定的时间后，完全释放再次进入closed状态</li>
</ol>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/06/11/tcp协议概览/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/30/xss攻击案例分析/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="瘦皮猴">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/30/xss攻击案例分析/" itemprop="url">xss攻击案例分析</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-30T00:00:00+08:00">
                2017-05-30
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>最近在阅读陈浩博客（coolshell.cn）web相关的文章，希望能拓宽自己的视野。</p>
<p><a href="http://coolshell.cn/articles/4914.html" target="_blank" rel="noopener">新浪微博的xss攻击</a>一文对攻击发生的核心并未做阐明，可能耗子叔认为起因显而易见，无需赘述。但是对于自己而言，背后的原理并不是很清晰。所以在反复阅读原文及攻击源码的同时，在网上也搜集了其它资料与网友的观点。</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/05/30/xss攻击案例分析/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/12/不懂装懂 MapReduce/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="瘦皮猴">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/12/不懂装懂 MapReduce/" itemprop="url">不懂装懂 MapReduce</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-12T00:00:00+08:00">
                2017-05-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>工作中遇到一个需求, 原始数据只是记录好的仪表(比如水表,电表)在某一时刻的表盘数值,但是前端需要显示的是在每天,每周,每月的使用量. 我和同事说,这样的需求的话,我们就放到前端去算吧, 没想到同事说应该在后端算, python 的 MapReduce很快. 我听着感觉不太对劲,但是对MapReduce并不是很了解,也就没有说啥.</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/05/12/不懂装懂 MapReduce/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/23/autotools个人备忘/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="瘦皮猴">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/02/23/autotools个人备忘/" itemprop="url">autotools个人备忘</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-02-23T00:00:00+08:00">
                2017-02-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>autotools是gnu开发快速构建c,c++工程的一套工具链,主要包含automake, autoconf等.autoconf用于检测系统环境, automake用于生成makefile文件.今天找了篇新手快速上手的文章,迅速的体验了一把. 本来只有一个c文件可直接编译的,但是对这套工具链,听闻已久,很想体验一番.</p>
<p>上手工程中主要遇到的问题包含</p>
<ol>
<li><p>需要链接 python解释器, 文中的实例代码并未涉及链接第三方库,需要自己琢磨,但是automake实际也相当繁杂,一时不太容易领悟要领.好在折腾正确了. 源码文件夹的 Makefile.am文件 LDFLAGS 使用制定在源码链接阶段的链接选项, 但是通过这种形式指定的选项,在链接时会放在使用到库的文件前面,导致链接找不到符号定义. **_LDADD,可以解决这个问题,但是一般的例子都是指定的变量,尝试着制定了python动态库的文件名,结果说无法生成此文件.最后通过指定连接文件的绝对路径解决此问题.</p>
</li>
<li><p>整套工具链较为繁杂,配置繁琐.</p>
</li>
</ol>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/02/23/autotools个人备忘/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpeg"
                alt="瘦皮猴" />
            
              <p class="site-author-name" itemprop="name">瘦皮猴</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">28</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          
            <div class="cc-license motion-element" itemprop="license">
              <a href="https://creativecommons.org/licenses/by/4.0/" class="cc-opacity" target="_blank">
                <img src="/images/cc-by.svg" alt="Creative Commons" />
              </a>
            </div>
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">瘦皮猴</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
